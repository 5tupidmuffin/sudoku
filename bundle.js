(()=>{"use strict";var t=function(){function t(t){this.cells=t,this.highlightedCellIndex=null}return t.prototype.fillBoard=function(t){for(var e=0;e<81;e++)t[e]?(this.cells[e].textContent=t[e],this.cells[e].classList.add("preFilledCell")):(this.cells[e].textContent="",this.cells[e].classList.remove("preFilledCell"))},t.prototype.isPrefilled=function(t){return this.cells[t].classList.contains("preFilledCell")},t.prototype.highlightCell=function(t){this.cells[t].classList.add("highlightedCell"),this.highlightedCellIndex=t},t.prototype.markInvalid=function(t){this.cells[t].classList.add("invalid")},t.prototype.removeHighlight=function(){null!==this.highlightedCellIndex&&(this.cells[this.highlightedCellIndex].classList.remove("highlightedCell"),this.cells[this.highlightedCellIndex].classList.remove("invalid"))},t.prototype.updateValue=function(t,e){if(this.isPrefilled(t))throw new Error("tried to update prefilled cell: ".concat(t));this.cells[t].textContent=e},t.prototype.removeValue=function(t,e){if(this.isPrefilled(t))throw new Error("tried to update prefilled cell: ".concat(t));this.cells[t].textContent=""},t}();const e=t;var n=function(){function t(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this.time=60*n+r,this.flag=null,this.minuteDis=t,this.secondDis=e}return t.prototype.start=function(){var t=this;this.flag||(this.flag=setInterval((function(){t.time+=1;var e=t.getTime();t.minuteDis.textContent="".concat(e.minutes,"M"),t.secondDis.textContent="".concat(e.seconds,"S")}),1e3))},t.prototype.pause=function(){this.flag&&(clearInterval(this.flag),this.flag=null)},t.prototype.reset=function(){this.pause(),this.time=0,this.minuteDis.textContent="".concat(0,"M"),this.secondDis.textContent="".concat(0,"S")},t.prototype.getTime=function(){return{minutes:Math.floor(this.time/60),seconds:this.time%60}},t}();const r=n;var i=function(t,e){var n=Math.random();return n>.5?0:Math.floor(n*(e-t)+t)},o=function(t){var e=l(t);if(null===e)return!0;for(var n=1;n<10;n++)if(d(t,e,n)){if(t[e]=n,o(t))return!0;t[e]=0}return!1},l=function(t){for(var e=0;e<81;e++)if(0===t[e])return e;return null},s=function(t,e,n){for(var r=e;r%9>0;)if(t[r-=1]===n)return!0;for(r=e;r%9<8;)if(t[r+=1]===n)return!0;return!1},u=function(t,e,n){for(var r=e;r>0;)if(t[r-=9]===n)return!0;for(r=e;r<81;)if(t[r+=9]===n)return!0;return!1},a=function(t,e,n){for(var r=[],i=e;i%3>0&&i>=0;)i-=1,r.push(t[i]);for(i=e;i%3<2&&i<81;)i+=1,r.push(t[i]);for(i=e%3==0?e-7:e%3==1?e-8:e-9;i>=0&&c(i)===c(e);){for(;i>=0&&c(i)===c(e);)r.push(t[i]),i-=1;i-=6}for(i=e%3==0?e+9:e%3==1?e+8:e+7;i<81&&c(i)===c(e);){for(;i<81&&c(i)===c(e);)r.push(t[i]),i+=1;i+=6}return r.includes(n)},c=function(t){return 3*Math.floor(t/27)+Math.floor(t/3%3)},d=function(t,e,n){return!s(t,e,n)&&!u(t,e,n)&&!a(t,e,n)},f=function(t,e){return!(s(t,e,t[e])||u(t,e,t[e])||a(t,e,t[e]))};const h=o;var p=function(){function t(t){void 0===t&&(t=[]),this.board=t.length?t:this.generateBoard()}return t.prototype.updateValue=function(t,e){this.board[t]=e},t.prototype.isFilled=function(){for(var t=0;t<81;t++)if(0===this.board[t])return!1;return!0},t.prototype.isCellValid=function(t){return f(this.board,t)},t.prototype.isBoardValid=function(){return function(t){for(var e=0;e<81;e++)if(!f(t,e))return!1;return!0}(this.board)},t.prototype.solve=function(t){void 0===t&&(t=this.board),h(t)},t.prototype.generateBoard=function(){for(var t=new Array(81).fill(0),e=[],n=[],r=0;r<5;r++){for(var o=i(0,81);e.includes(o);)o=i(1,9);e.push(o)}for(r=0;r<5;r++){for(var l=i(1,9);n.includes(l);)l=i(1,9);n.push(l)}for(r=0;r<5;r++)t[e[r]]=n[r];for(this.solve(t),r=0;r<81;r++)Math.random()>.7&&(t[r]=0);return t},t.prototype.generateRandomBoard=function(){for(var t=0;t<81;t++)this.board[t]=i(0,9);return this.board},t}();const v=p;var g=document.querySelector("#minute"),m=document.querySelector("#second"),C=document.querySelectorAll(".cell"),y=document.querySelectorAll(".numberInput"),b=null,x=null,w=new r(g,m);w.start();var L=new e(C),V=new v;L.fillBoard(V.board),C.forEach((function(t,e){t.addEventListener("click",(function(n){L.removeHighlight(),b=null,x=null,L.isPrefilled(e)||(L.highlightCell(e),b=t,x=e)}))})),y.forEach((function(t){t.addEventListener("click",(function(e){e.preventDefault(),b&&(V.updateValue(x,"X"===t.textContent?0:Number(t.textContent)),L.updateValue(x,"X"===t.textContent?null:t.textContent),V.isFilled()&&V.isBoardValid()&&(alert("Solved!"),w.pause()))}))})),document.querySelector("#reset").addEventListener("click",(function(){for(var t=0;t<81;t++)C[t].classList.contains("preFilledCell")||(L.updateValue(t,null),V.updateValue(t,0))})),document.querySelector("#validate").addEventListener("click",(function(){for(var t=0;t<81;t++)C[t].classList.contains("preFilledCell")||0===V.board[t]||V.isCellValid(t)||L.markInvalid(t)})),document.querySelector("#new").addEventListener("click",(function(){V.board=V.generateBoard(),L.fillBoard(V.board),w.reset(),w.start()})),window.enableDebugging=function(){window.logic=V,window.board=L}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3BDQSxFQUFFRSxpQkFDRVQsSUFDQUcsRUFBTXpELFlBQVl1RCxFQUF1QyxNQUFwQk8sRUFBSXhFLFlBQXNCLEVBQUkwRSxPQUFPRixFQUFJeEUsY0FDOUVvQyxFQUFNMUIsWUFBWXVELEVBQXVDLE1BQXBCTyxFQUFJeEUsWUFBc0IsS0FBT3dFLEVBQUl4RSxhQUN0RW1FLEVBQU1mLFlBQ0ZlLEVBQU1kLGlCQUNOc0IsTUFBTSxXQUNOVCxFQUFNeEMsZ0JBTTFCa0MsU0FBU0MsY0FBYyxVQUFVUyxpQkFBaUIsU0FBUyxXQUN2RCxJQUFLLElBQUl2RSxFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFDZk4sRUFBTU0sR0FBR0UsVUFBVUssU0FBUyxtQkFDN0I4QixFQUFNMUIsWUFBWVgsRUFBRyxNQUNyQm9FLEVBQU16RCxZQUFZWCxFQUFHLE9BSWpDNkQsU0FBU0MsY0FBYyxhQUFhUyxpQkFBaUIsU0FBUyxXQUMxRCxJQUFLLElBQUl2RSxFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFDZk4sRUFBTU0sR0FBR0UsVUFBVUssU0FBUyxrQkFDTixJQUFuQjZELEVBQU0vQixNQUFNckMsSUFBYW9FLEVBQU1uQixZQUFZakQsSUFDM0NxQyxFQUFNNUIsWUFBWVQsTUFLbEM2RCxTQUFTQyxjQUFjLFFBQVFTLGlCQUFpQixTQUFTLFdBQ3JESCxFQUFNL0IsTUFBUStCLEVBQU1oQixnQkFDcEJmLEVBQU12QyxVQUFVc0UsRUFBTS9CLE9BQ3RCOEIsRUFBTXRDLFFBQ05zQyxFQUFNNUMsV0FNVnNELE9BQU9DLGdCQUplLFdBQ2xCRCxPQUFPVCxNQUFRQSxFQUNmUyxPQUFPeEMsTUFBUUEsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1ZG9rdS8uL3NyYy9Cb2FyZC9pbmRleC50cyIsIndlYnBhY2s6Ly9zdWRva3UvLi9zcmMvQ2xvY2svaW5kZXgudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1Ly4vc3JjL3V0aWxzL2luZGV4LnRzIiwid2VicGFjazovL3N1ZG9rdS8uL3NyYy9Mb2dpYy9sb2dpYy5zb2x2ZXIudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1Ly4vc3JjL0xvZ2ljL2luZGV4LnRzIiwid2VicGFjazovL3N1ZG9rdS8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQm9hcmQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCb2FyZChjZWxscykge1xyXG4gICAgICAgIHRoaXMuY2VsbHMgPSBjZWxscztcclxuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkQ2VsbEluZGV4ID0gbnVsbDtcclxuICAgIH1cclxuICAgIEJvYXJkLnByb3RvdHlwZS5maWxsQm9hcmQgPSBmdW5jdGlvbiAodmFsdWVzKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4MTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZXNbaV0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2VsbHNbaV0udGV4dENvbnRlbnQgPSB2YWx1ZXNbaV07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxzW2ldLmNsYXNzTGlzdC5hZGQoXCJwcmVGaWxsZWRDZWxsXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsc1tpXS50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxzW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJwcmVGaWxsZWRDZWxsXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEJvYXJkLnByb3RvdHlwZS5pc1ByZWZpbGxlZCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNlbGxzW2luZGV4XS5jbGFzc0xpc3QuY29udGFpbnMoXCJwcmVGaWxsZWRDZWxsXCIpO1xyXG4gICAgfTtcclxuICAgIEJvYXJkLnByb3RvdHlwZS5oaWdobGlnaHRDZWxsID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5jZWxsc1tpbmRleF0uY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodGVkQ2VsbFwiKTtcclxuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkQ2VsbEluZGV4ID0gaW5kZXg7XHJcbiAgICB9O1xyXG4gICAgQm9hcmQucHJvdG90eXBlLm1hcmtJbnZhbGlkID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5jZWxsc1tpbmRleF0uY2xhc3NMaXN0LmFkZChcImludmFsaWRcIik7XHJcbiAgICB9O1xyXG4gICAgQm9hcmQucHJvdG90eXBlLnJlbW92ZUhpZ2hsaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5oaWdobGlnaHRlZENlbGxJbmRleCA9PT0gbnVsbClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuY2VsbHNbdGhpcy5oaWdobGlnaHRlZENlbGxJbmRleF0uY2xhc3NMaXN0LnJlbW92ZShcImhpZ2hsaWdodGVkQ2VsbFwiKTtcclxuICAgICAgICB0aGlzLmNlbGxzW3RoaXMuaGlnaGxpZ2h0ZWRDZWxsSW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoXCJpbnZhbGlkXCIpO1xyXG4gICAgfTtcclxuICAgIEJvYXJkLnByb3RvdHlwZS51cGRhdGVWYWx1ZSA9IGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1ByZWZpbGxlZChpbmRleCkpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyaWVkIHRvIHVwZGF0ZSBwcmVmaWxsZWQgY2VsbDogXCIuY29uY2F0KGluZGV4KSk7XHJcbiAgICAgICAgdGhpcy5jZWxsc1tpbmRleF0udGV4dENvbnRlbnQgPSB2YWx1ZTtcclxuICAgIH07XHJcbiAgICBCb2FyZC5wcm90b3R5cGUucmVtb3ZlVmFsdWUgPSBmdW5jdGlvbiAoaW5kZXgsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQcmVmaWxsZWQoaW5kZXgpKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cmllZCB0byB1cGRhdGUgcHJlZmlsbGVkIGNlbGw6IFwiLmNvbmNhdChpbmRleCkpO1xyXG4gICAgICAgIHRoaXMuY2VsbHNbaW5kZXhdLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQm9hcmQ7XHJcbn0oKSk7XHJcbmV4cG9ydCBkZWZhdWx0IEJvYXJkO1xyXG4iLCJ2YXIgQ2xvY2sgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDbG9jayhtaW51dGVEaXMsIHNlY29uZERpcywgbWludXRlcywgc2Vjb25kcykge1xyXG4gICAgICAgIGlmIChtaW51dGVzID09PSB2b2lkIDApIHsgbWludXRlcyA9IDA7IH1cclxuICAgICAgICBpZiAoc2Vjb25kcyA9PT0gdm9pZCAwKSB7IHNlY29uZHMgPSAwOyB9XHJcbiAgICAgICAgdGhpcy50aW1lID0gbWludXRlcyAqIDYwICsgc2Vjb25kcztcclxuICAgICAgICB0aGlzLmZsYWcgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubWludXRlRGlzID0gbWludXRlRGlzO1xyXG4gICAgICAgIHRoaXMuc2Vjb25kRGlzID0gc2Vjb25kRGlzO1xyXG4gICAgfVxyXG4gICAgQ2xvY2sucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuZmxhZylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuZmxhZyA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMudGltZSArPSAxO1xyXG4gICAgICAgICAgICB2YXIgdGltZSA9IF90aGlzLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgX3RoaXMubWludXRlRGlzLnRleHRDb250ZW50ID0gXCJcIi5jb25jYXQodGltZS5taW51dGVzLCBcIk1cIik7XHJcbiAgICAgICAgICAgIF90aGlzLnNlY29uZERpcy50ZXh0Q29udGVudCA9IFwiXCIuY29uY2F0KHRpbWUuc2Vjb25kcywgXCJTXCIpO1xyXG4gICAgICAgIH0sIDEgKiAxMDAwKTtcclxuICAgIH07XHJcbiAgICBDbG9jay5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmxhZykge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuZmxhZyk7XHJcbiAgICAgICAgICAgIHRoaXMuZmxhZyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENsb2NrLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnBhdXNlKCk7XHJcbiAgICAgICAgdGhpcy50aW1lID0gMDtcclxuICAgICAgICB0aGlzLm1pbnV0ZURpcy50ZXh0Q29udGVudCA9IFwiXCIuY29uY2F0KDAsIFwiTVwiKTtcclxuICAgICAgICB0aGlzLnNlY29uZERpcy50ZXh0Q29udGVudCA9IFwiXCIuY29uY2F0KDAsIFwiU1wiKTtcclxuICAgIH07XHJcbiAgICBDbG9jay5wcm90b3R5cGUuZ2V0VGltZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtaW51dGVzOiBNYXRoLmZsb29yKHRoaXMudGltZSAvIDYwKSxcclxuICAgICAgICAgICAgc2Vjb25kczogdGhpcy50aW1lICUgNjAsXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ2xvY2s7XHJcbn0oKSk7XHJcbmV4cG9ydCBkZWZhdWx0IENsb2NrO1xyXG4iLCJleHBvcnQgdmFyIGdldFJhbmRvbUFyYml0cmFyeSA9IGZ1bmN0aW9uIChtaW4sIG1heCkge1xyXG4gICAgdmFyIHJhbmRvbSA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICAvLyAgIDUwJSBjaGFuZ2Ugb2YgZ2V0dGluZyAwIGkuZS4gZW1wdHkgY2VsbFxyXG4gICAgaWYgKHJhbmRvbSA+IDAuNSkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IocmFuZG9tICogKG1heCAtIG1pbikgKyBtaW4pO1xyXG59O1xyXG4iLCIvLyBzdWRva3Ugc29sdmVyXHJcbi8vIGh0dHBzOi8vd3d3LmdlZWtzZm9yZ2Vla3Mub3JnL3N1ZG9rdS1iYWNrdHJhY2tpbmctNy8gIC0tLSAyRCBBcnJheSBiYXNlZFxyXG52YXIgc3Vkb2t1U29sdmVyID0gZnVuY3Rpb24gKGJvYXJkKSB7XHJcbiAgICB2YXIgZW1wdHlDZWxsID0gZ2V0RW1wdHlDZWxsSW5kZXgoYm9hcmQpO1xyXG4gICAgaWYgKGVtcHR5Q2VsbCA9PT0gbnVsbClcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgMTA7IGkrKykge1xyXG4gICAgICAgIGlmIChpc1NhZmUoYm9hcmQsIGVtcHR5Q2VsbCwgaSkpIHtcclxuICAgICAgICAgICAgYm9hcmRbZW1wdHlDZWxsXSA9IGk7XHJcbiAgICAgICAgICAgIGlmIChzdWRva3VTb2x2ZXIoYm9hcmQpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGJvYXJkW2VtcHR5Q2VsbF0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufTtcclxudmFyIGdldEVtcHR5Q2VsbEluZGV4ID0gZnVuY3Rpb24gKGJvYXJkKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDgxOyBpKyspIHtcclxuICAgICAgICBpZiAoYm9hcmRbaV0gPT09IDApXHJcbiAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcbnZhciBpc0luUm93ID0gZnVuY3Rpb24gKGJvYXJkLCBpbmRleCwgdmFsdWUpIHtcclxuICAgIHZhciB0ZW1wSW5kZXggPSBpbmRleDtcclxuICAgIC8vIGxlZnRcclxuICAgIHdoaWxlICh0ZW1wSW5kZXggJSA5ID4gMCkge1xyXG4gICAgICAgIHRlbXBJbmRleCAtPSAxO1xyXG4gICAgICAgIGlmIChib2FyZFt0ZW1wSW5kZXhdID09PSB2YWx1ZSlcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICB0ZW1wSW5kZXggPSBpbmRleDtcclxuICAgIC8vIHJpZ2h0XHJcbiAgICB3aGlsZSAodGVtcEluZGV4ICUgOSA8IDgpIHtcclxuICAgICAgICB0ZW1wSW5kZXggKz0gMTtcclxuICAgICAgICBpZiAoYm9hcmRbdGVtcEluZGV4XSA9PT0gdmFsdWUpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG52YXIgaXNJbkNvbHVtbiA9IGZ1bmN0aW9uIChib2FyZCwgaW5kZXgsIHZhbHVlKSB7XHJcbiAgICB2YXIgdGVtcEluZGV4ID0gaW5kZXg7XHJcbiAgICAvLyB1cFxyXG4gICAgd2hpbGUgKHRlbXBJbmRleCA+IDApIHtcclxuICAgICAgICB0ZW1wSW5kZXggLT0gOTtcclxuICAgICAgICBpZiAoYm9hcmRbdGVtcEluZGV4XSA9PT0gdmFsdWUpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgdGVtcEluZGV4ID0gaW5kZXg7XHJcbiAgICB3aGlsZSAodGVtcEluZGV4IDwgODEpIHtcclxuICAgICAgICB0ZW1wSW5kZXggKz0gOTtcclxuICAgICAgICBpZiAoYm9hcmRbdGVtcEluZGV4XSA9PT0gdmFsdWUpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG52YXIgaXNJbkJveCA9IGZ1bmN0aW9uIChib2FyZCwgaW5kZXgsIHZhbHVlKSB7XHJcbiAgICAvLyBnZWVrc0ZvckdlZWtzJyBzdWJncmlkIGNoZWNrIGZ1bmN0aW9uIGlzIGVycm9yIHByb25lIDooXHJcbiAgICB2YXIgdGVtcEJvYXJkID0gW107XHJcbiAgICB2YXIgdGVtcEluZGV4ID0gaW5kZXg7XHJcbiAgICAvLyBsZWZ0XHJcbiAgICB3aGlsZSAodGVtcEluZGV4ICUgMyA+IDAgJiYgdGVtcEluZGV4ID49IDApIHtcclxuICAgICAgICB0ZW1wSW5kZXggLT0gMTtcclxuICAgICAgICB0ZW1wQm9hcmQucHVzaChib2FyZFt0ZW1wSW5kZXhdKTtcclxuICAgIH1cclxuICAgIHRlbXBJbmRleCA9IGluZGV4O1xyXG4gICAgLy8gcmlnaHRcclxuICAgIHdoaWxlICh0ZW1wSW5kZXggJSAzIDwgMiAmJiB0ZW1wSW5kZXggPCA4MSkge1xyXG4gICAgICAgIHRlbXBJbmRleCArPSAxO1xyXG4gICAgICAgIHRlbXBCb2FyZC5wdXNoKGJvYXJkW3RlbXBJbmRleF0pO1xyXG4gICAgfVxyXG4gICAgLy8gdXBcclxuICAgIHRlbXBJbmRleCA9XHJcbiAgICAgICAgaW5kZXggJSAzID09PSAwID8gaW5kZXggLSA3IDogaW5kZXggJSAzID09PSAxID8gaW5kZXggLSA4IDogaW5kZXggLSA5O1xyXG4gICAgd2hpbGUgKHRlbXBJbmRleCA+PSAwICYmXHJcbiAgICAgICAgZ2V0U3ViZ3JpZEluZGV4KHRlbXBJbmRleCkgPT09IGdldFN1YmdyaWRJbmRleChpbmRleCkpIHtcclxuICAgICAgICB3aGlsZSAodGVtcEluZGV4ID49IDAgJiZcclxuICAgICAgICAgICAgZ2V0U3ViZ3JpZEluZGV4KHRlbXBJbmRleCkgPT09IGdldFN1YmdyaWRJbmRleChpbmRleCkpIHtcclxuICAgICAgICAgICAgdGVtcEJvYXJkLnB1c2goYm9hcmRbdGVtcEluZGV4XSk7XHJcbiAgICAgICAgICAgIHRlbXBJbmRleCAtPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0ZW1wSW5kZXggPSB0ZW1wSW5kZXggLSA2O1xyXG4gICAgfVxyXG4gICAgdGVtcEluZGV4ID1cclxuICAgICAgICBpbmRleCAlIDMgPT09IDAgPyBpbmRleCArIDkgOiBpbmRleCAlIDMgPT09IDEgPyBpbmRleCArIDggOiBpbmRleCArIDc7XHJcbiAgICAvLyBkb3duXHJcbiAgICB3aGlsZSAodGVtcEluZGV4IDwgODEgJiZcclxuICAgICAgICBnZXRTdWJncmlkSW5kZXgodGVtcEluZGV4KSA9PT0gZ2V0U3ViZ3JpZEluZGV4KGluZGV4KSkge1xyXG4gICAgICAgIHdoaWxlICh0ZW1wSW5kZXggPCA4MSAmJlxyXG4gICAgICAgICAgICBnZXRTdWJncmlkSW5kZXgodGVtcEluZGV4KSA9PT0gZ2V0U3ViZ3JpZEluZGV4KGluZGV4KSkge1xyXG4gICAgICAgICAgICB0ZW1wQm9hcmQucHVzaChib2FyZFt0ZW1wSW5kZXhdKTtcclxuICAgICAgICAgICAgdGVtcEluZGV4ICs9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRlbXBJbmRleCA9IHRlbXBJbmRleCArIDY7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGVtcEJvYXJkLmluY2x1ZGVzKHZhbHVlKTtcclxufTtcclxudmFyIGdldFN1YmdyaWRJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgLypcclxuICAgICAgTWF0aC5mbG9vcihJRFggLyAyNykgPT09IHN1YmdyaWQgcm93IG51bWJlclxyXG4gICAgICBNYXRoLmZsb29yKChJRFggLyAzKSAlIDMpID09PSBzdWJncmlkIGNvbHVtbiBudW1iZXJcclxuICAgICovXHJcbiAgICB2YXIgcm93SW5kZXggPSBNYXRoLmZsb29yKGluZGV4IC8gMjcpO1xyXG4gICAgdmFyIGNvbHVtbkluZGV4ID0gTWF0aC5mbG9vcigoaW5kZXggLyAzKSAlIDMpO1xyXG4gICAgcmV0dXJuIHJvd0luZGV4ICogMyArIGNvbHVtbkluZGV4O1xyXG59O1xyXG52YXIgaXNTYWZlID0gZnVuY3Rpb24gKGJvYXJkLCBpbmRleCwgdmFsdWUpIHtcclxuICAgIHJldHVybiAoIWlzSW5Sb3coYm9hcmQsIGluZGV4LCB2YWx1ZSkgJiZcclxuICAgICAgICAhaXNJbkNvbHVtbihib2FyZCwgaW5kZXgsIHZhbHVlKSAmJlxyXG4gICAgICAgICFpc0luQm94KGJvYXJkLCBpbmRleCwgdmFsdWUpKTtcclxufTtcclxuZXhwb3J0IHZhciBpc0NlbGxWYWxpZCA9IGZ1bmN0aW9uIChib2FyZCwgaW5kZXgpIHtcclxuICAgIGlmIChpc0luUm93KGJvYXJkLCBpbmRleCwgYm9hcmRbaW5kZXhdKSB8fFxyXG4gICAgICAgIGlzSW5Db2x1bW4oYm9hcmQsIGluZGV4LCBib2FyZFtpbmRleF0pIHx8XHJcbiAgICAgICAgaXNJbkJveChib2FyZCwgaW5kZXgsIGJvYXJkW2luZGV4XSkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufTtcclxuZXhwb3J0IHZhciBpc1N1ZG9rdUJvYXJkVmFsaWQgPSBmdW5jdGlvbiAoYm9hcmQpIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgODE7IGkrKykge1xyXG4gICAgICAgIGlmICghaXNDZWxsVmFsaWQoYm9hcmQsIGkpKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufTtcclxuLy8gcHJldHRpZXItaWdub3JlXHJcbnZhciB0ZXN0Qm9hcmQgPSBbXHJcbiAgICA1LCAzLCAwLCAwLCA3LCAwLCAwLCAwLCAwLFxyXG4gICAgNiwgMCwgMCwgMSwgOSwgNSwgMCwgMCwgMCxcclxuICAgIDAsIDksIDgsIDAsIDAsIDAsIDAsIDYsIDAsXHJcbiAgICA4LCAwLCAwLCAwLCA2LCAwLCAwLCAwLCAzLFxyXG4gICAgNCwgMCwgMCwgOCwgMCwgMywgMCwgMCwgMSxcclxuICAgIDcsIDAsIDAsIDAsIDIsIDAsIDAsIDAsIDYsXHJcbiAgICAwLCA2LCAwLCAwLCAwLCAwLCAyLCA4LCAwLFxyXG4gICAgMCwgMCwgMCwgNCwgMSwgOSwgMCwgMCwgNSxcclxuICAgIDAsIDAsIDAsIDAsIDgsIDAsIDAsIDcsIDksXHJcbl07XHJcbi8vIHByZXR0aWVyLWlnbm9yZVxyXG52YXIgdGVzdFNvbHV0aW9uID0gW1xyXG4gICAgNSwgMywgNCwgNiwgNywgOCwgOSwgMSwgMixcclxuICAgIDYsIDcsIDIsIDEsIDksIDUsIDMsIDQsIDgsXHJcbiAgICAxLCA5LCA4LCAzLCA0LCAyLCA1LCA2LCA3LFxyXG4gICAgOCwgNSwgOSwgNywgNiwgMSwgNCwgMiwgMyxcclxuICAgIDQsIDIsIDYsIDgsIDUsIDMsIDcsIDksIDEsXHJcbiAgICA3LCAxLCAzLCA5LCAyLCA0LCA4LCA1LCA2LFxyXG4gICAgOSwgNiwgMSwgNSwgMywgNywgMiwgOCwgNCxcclxuICAgIDIsIDgsIDcsIDQsIDEsIDksIDYsIDMsIDUsXHJcbiAgICAzLCA0LCA1LCAyLCA4LCA2LCAxLCA3LCA5LFxyXG5dO1xyXG4vLyBwcmV0dGllci1pZ25vcmVcclxudmFyIHRlc3RCb2FyZDIgPSBbXHJcbiAgICAwLCAwLCAxLCAwLCA1LCAwLCA2LCAzLCAwLFxyXG4gICAgMywgMCwgMCwgMCwgNywgOCwgMCwgNSwgMCxcclxuICAgIDAsIDAsIDUsIDQsIDYsIDAsIDcsIDAsIDAsXHJcbiAgICAyLCA1LCAwLCAwLCAwLCAwLCAwLCA0LCA3LFxyXG4gICAgMCwgMSwgMCwgMCwgMCwgNywgMCwgMCwgMCxcclxuICAgIDcsIDAsIDYsIDAsIDAsIDQsIDAsIDAsIDAsXHJcbiAgICAxLCA0LCAyLCA4LCAwLCAwLCA1LCAwLCAwLFxyXG4gICAgNiwgMywgNywgMCwgNCwgMCwgOCwgMSwgMCxcclxuICAgIDAsIDAsIDgsIDAsIDEsIDAsIDAsIDIsIDAsXHJcbl07XHJcbi8vIHByZXR0aWVyLWlnbm9yZVxyXG52YXIgc29sdXRpb24yID0gW1xyXG4gICAgOCwgNywgMSwgOSwgNSwgMiwgNiwgMywgNCxcclxuICAgIDMsIDYsIDQsIDEsIDcsIDgsIDksIDUsIDIsXHJcbiAgICA5LCAyLCA1LCA0LCA2LCAzLCA3LCA4LCAxLFxyXG4gICAgMiwgNSwgOSwgNiwgOCwgMSwgMywgNCwgNyxcclxuICAgIDQsIDEsIDMsIDUsIDksIDcsIDIsIDYsIDgsXHJcbiAgICA3LCA4LCA2LCAzLCAyLCA0LCAxLCA5LCA1LFxyXG4gICAgMSwgNCwgMiwgOCwgMywgOSwgNSwgNywgNixcclxuICAgIDYsIDMsIDcsIDIsIDQsIDUsIDgsIDEsIDksXHJcbiAgICA1LCA5LCA4LCA3LCAxLCA2LCA0LCAyLCAzXHJcbl07XHJcbmV4cG9ydCBkZWZhdWx0IHN1ZG9rdVNvbHZlcjtcclxuIiwiaW1wb3J0IHsgZ2V0UmFuZG9tQXJiaXRyYXJ5IH0gZnJvbSBcIi4uL3V0aWxzXCI7XHJcbmltcG9ydCBzdWRva3VTb2x2ZXIsIHsgaXNTdWRva3VCb2FyZFZhbGlkLCBpc0NlbGxWYWxpZCB9IGZyb20gXCIuL2xvZ2ljLnNvbHZlclwiO1xyXG52YXIgTG9naWMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMb2dpYyhib2FyZCkge1xyXG4gICAgICAgIGlmIChib2FyZCA9PT0gdm9pZCAwKSB7IGJvYXJkID0gW107IH1cclxuICAgICAgICB0aGlzLmJvYXJkID0gYm9hcmQubGVuZ3RoID8gYm9hcmQgOiB0aGlzLmdlbmVyYXRlQm9hcmQoKTtcclxuICAgIH1cclxuICAgIExvZ2ljLnByb3RvdHlwZS51cGRhdGVWYWx1ZSA9IGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLmJvYXJkW2luZGV4XSA9IHZhbHVlO1xyXG4gICAgfTtcclxuICAgIExvZ2ljLnByb3RvdHlwZS5pc0ZpbGxlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDgxOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYm9hcmRbaV0gPT09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIExvZ2ljLnByb3RvdHlwZS5pc0NlbGxWYWxpZCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHJldHVybiBpc0NlbGxWYWxpZCh0aGlzLmJvYXJkLCBpbmRleCk7XHJcbiAgICB9O1xyXG4gICAgTG9naWMucHJvdG90eXBlLmlzQm9hcmRWYWxpZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gaXNTdWRva3VCb2FyZFZhbGlkKHRoaXMuYm9hcmQpO1xyXG4gICAgfTtcclxuICAgIExvZ2ljLnByb3RvdHlwZS5zb2x2ZSA9IGZ1bmN0aW9uIChib2FyZCkge1xyXG4gICAgICAgIGlmIChib2FyZCA9PT0gdm9pZCAwKSB7IGJvYXJkID0gdGhpcy5ib2FyZDsgfVxyXG4gICAgICAgIHN1ZG9rdVNvbHZlcihib2FyZCk7XHJcbiAgICB9O1xyXG4gICAgTG9naWMucHJvdG90eXBlLmdlbmVyYXRlQm9hcmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRlbXBCb2FyZCA9IG5ldyBBcnJheSg4MSkuZmlsbCgwKTtcclxuICAgICAgICB2YXIgaW5kZXhlcyA9IFtdO1xyXG4gICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBnZXRSYW5kb21BcmJpdHJhcnkoMCwgODEpO1xyXG4gICAgICAgICAgICB3aGlsZSAoaW5kZXhlcy5pbmNsdWRlcyhpbmRleCkpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gZ2V0UmFuZG9tQXJiaXRyYXJ5KDEsIDkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGluZGV4ZXMucHVzaChpbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGdldFJhbmRvbUFyYml0cmFyeSgxLCA5KTtcclxuICAgICAgICAgICAgd2hpbGUgKHZhbHVlcy5pbmNsdWRlcyh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gZ2V0UmFuZG9tQXJiaXRyYXJ5KDEsIDkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgdGVtcEJvYXJkW2luZGV4ZXNbaV1dID0gdmFsdWVzW2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNvbHZlKHRlbXBCb2FyZCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4MTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC43KSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wQm9hcmRbaV0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0ZW1wQm9hcmQ7XHJcbiAgICB9O1xyXG4gICAgTG9naWMucHJvdG90eXBlLmdlbmVyYXRlUmFuZG9tQm9hcmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4MTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYm9hcmRbaV0gPSBnZXRSYW5kb21BcmJpdHJhcnkoMCwgOSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmJvYXJkO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBMb2dpYztcclxufSgpKTtcclxuZXhwb3J0IGRlZmF1bHQgTG9naWM7XHJcbiIsImltcG9ydCBCb2FyZCBmcm9tIFwiLi9Cb2FyZFwiO1xyXG5pbXBvcnQgQ2xvY2sgZnJvbSBcIi4vQ2xvY2tcIjtcclxuaW1wb3J0IExvZ2ljIGZyb20gXCIuL0xvZ2ljXCI7XHJcbi8vIGNsb2NrIHNldHVwXHJcbnZhciBtaW51dGVEaXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21pbnV0ZVwiKTtcclxudmFyIHNlY29uZERpcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2Vjb25kXCIpO1xyXG52YXIgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIik7XHJcbnZhciBudW1iZXJJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm51bWJlcklucHV0XCIpO1xyXG52YXIgc2VsZWN0ZWRDZWxsID0gbnVsbDtcclxudmFyIHNlbGVjdGVkQ2VsbEluZGV4ID0gbnVsbDtcclxudmFyIGNsb2NrID0gbmV3IENsb2NrKG1pbnV0ZURpcywgc2Vjb25kRGlzKTtcclxuY2xvY2suc3RhcnQoKTtcclxuLy8gYm9hcmRzIHNldHVwXHJcbnZhciBib2FyZCA9IG5ldyBCb2FyZChjZWxscyk7XHJcbnZhciBsb2dpYyA9IG5ldyBMb2dpYygpO1xyXG5ib2FyZC5maWxsQm9hcmQobG9naWMuYm9hcmQpO1xyXG5jZWxscy5mb3JFYWNoKGZ1bmN0aW9uIChjZWxsLCBpbmRleCkge1xyXG4gICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBib2FyZC5yZW1vdmVIaWdobGlnaHQoKTtcclxuICAgICAgICBzZWxlY3RlZENlbGwgPSBudWxsO1xyXG4gICAgICAgIHNlbGVjdGVkQ2VsbEluZGV4ID0gbnVsbDtcclxuICAgICAgICBpZiAoYm9hcmQuaXNQcmVmaWxsZWQoaW5kZXgpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgYm9hcmQuaGlnaGxpZ2h0Q2VsbChpbmRleCk7XHJcbiAgICAgICAgc2VsZWN0ZWRDZWxsID0gY2VsbDtcclxuICAgICAgICBzZWxlY3RlZENlbGxJbmRleCA9IGluZGV4O1xyXG4gICAgfSk7XHJcbn0pO1xyXG4vLyBpbnB1dCBzZXR1cFxyXG5udW1iZXJJbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoYnRuKSB7XHJcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGlmIChzZWxlY3RlZENlbGwpIHtcclxuICAgICAgICAgICAgbG9naWMudXBkYXRlVmFsdWUoc2VsZWN0ZWRDZWxsSW5kZXgsIGJ0bi50ZXh0Q29udGVudCA9PT0gXCJYXCIgPyAwIDogTnVtYmVyKGJ0bi50ZXh0Q29udGVudCkpO1xyXG4gICAgICAgICAgICBib2FyZC51cGRhdGVWYWx1ZShzZWxlY3RlZENlbGxJbmRleCwgYnRuLnRleHRDb250ZW50ID09PSBcIlhcIiA/IG51bGwgOiBidG4udGV4dENvbnRlbnQpO1xyXG4gICAgICAgICAgICBpZiAobG9naWMuaXNGaWxsZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvZ2ljLmlzQm9hcmRWYWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJTb2x2ZWQhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb2NrLnBhdXNlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSk7XHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcmVzZXRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgODE7IGkrKykge1xyXG4gICAgICAgIGlmICghY2VsbHNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwicHJlRmlsbGVkQ2VsbFwiKSkge1xyXG4gICAgICAgICAgICBib2FyZC51cGRhdGVWYWx1ZShpLCBudWxsKTtcclxuICAgICAgICAgICAgbG9naWMudXBkYXRlVmFsdWUoaSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN2YWxpZGF0ZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4MTsgaSsrKSB7XHJcbiAgICAgICAgaWYgKCFjZWxsc1tpXS5jbGFzc0xpc3QuY29udGFpbnMoXCJwcmVGaWxsZWRDZWxsXCIpKSB7XHJcbiAgICAgICAgICAgIGlmIChsb2dpYy5ib2FyZFtpXSAhPT0gMCAmJiAhbG9naWMuaXNDZWxsVmFsaWQoaSkpIHtcclxuICAgICAgICAgICAgICAgIGJvYXJkLm1hcmtJbnZhbGlkKGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXdcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIGxvZ2ljLmJvYXJkID0gbG9naWMuZ2VuZXJhdGVCb2FyZCgpO1xyXG4gICAgYm9hcmQuZmlsbEJvYXJkKGxvZ2ljLmJvYXJkKTtcclxuICAgIGNsb2NrLnJlc2V0KCk7XHJcbiAgICBjbG9jay5zdGFydCgpO1xyXG59KTtcclxudmFyIGVuYWJsZURlYnVnZ2luZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHdpbmRvdy5sb2dpYyA9IGxvZ2ljO1xyXG4gICAgd2luZG93LmJvYXJkID0gYm9hcmQ7XHJcbn07XHJcbndpbmRvdy5lbmFibGVEZWJ1Z2dpbmcgPSBlbmFibGVEZWJ1Z2dpbmc7XHJcbiJdLCJuYW1lcyI6WyJCb2FyZCIsImNlbGxzIiwidGhpcyIsImhpZ2hsaWdodGVkQ2VsbEluZGV4IiwicHJvdG90eXBlIiwiZmlsbEJvYXJkIiwidmFsdWVzIiwiaSIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiaXNQcmVmaWxsZWQiLCJpbmRleCIsImNvbnRhaW5zIiwiaGlnaGxpZ2h0Q2VsbCIsIm1hcmtJbnZhbGlkIiwicmVtb3ZlSGlnaGxpZ2h0IiwidXBkYXRlVmFsdWUiLCJ2YWx1ZSIsIkVycm9yIiwiY29uY2F0IiwicmVtb3ZlVmFsdWUiLCJDbG9jayIsIm1pbnV0ZURpcyIsInNlY29uZERpcyIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwidGltZSIsImZsYWciLCJzdGFydCIsIl90aGlzIiwic2V0SW50ZXJ2YWwiLCJnZXRUaW1lIiwicGF1c2UiLCJjbGVhckludGVydmFsIiwicmVzZXQiLCJNYXRoIiwiZmxvb3IiLCJnZXRSYW5kb21BcmJpdHJhcnkiLCJtaW4iLCJtYXgiLCJyYW5kb20iLCJzdWRva3VTb2x2ZXIiLCJib2FyZCIsImVtcHR5Q2VsbCIsImdldEVtcHR5Q2VsbEluZGV4IiwiaXNTYWZlIiwiaXNJblJvdyIsInRlbXBJbmRleCIsImlzSW5Db2x1bW4iLCJpc0luQm94IiwidGVtcEJvYXJkIiwicHVzaCIsImdldFN1YmdyaWRJbmRleCIsImluY2x1ZGVzIiwiaXNDZWxsVmFsaWQiLCJMb2dpYyIsImxlbmd0aCIsImdlbmVyYXRlQm9hcmQiLCJpc0ZpbGxlZCIsImlzQm9hcmRWYWxpZCIsImlzU3Vkb2t1Qm9hcmRWYWxpZCIsInNvbHZlIiwiQXJyYXkiLCJmaWxsIiwiaW5kZXhlcyIsImdlbmVyYXRlUmFuZG9tQm9hcmQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwibnVtYmVySW5wdXRzIiwic2VsZWN0ZWRDZWxsIiwic2VsZWN0ZWRDZWxsSW5kZXgiLCJjbG9jayIsImxvZ2ljIiwiZm9yRWFjaCIsImNlbGwiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImJ0biIsInByZXZlbnREZWZhdWx0IiwiTnVtYmVyIiwiYWxlcnQiLCJ3aW5kb3ciLCJlbmFibGVEZWJ1Z2dpbmciXSwic291cmNlUm9vdCI6IiJ9